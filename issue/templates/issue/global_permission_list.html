{% extends 'base.html' %}

{% load django_markdown %}
{% load issue_filters %}
{% load issue_tags %}

{% block content %}


<div class="panel panel-default">

  <div class="panel-heading">
    <h1>
      Global permissions
      <div class="pull-right">
        <a href="{% url 'add-global-permission' %}" class="btn btn-success">Add new permission</a>
      </div>
    </h1>
  </div>

  {% if permissions.count %}
  <table class="table table-bordered">
    <tr>
      <th rowspan="3" class="text-center">Type</th>
      <th rowspan="3" class="text-center">Name</th>
      <th colspan="6" class="text-center">Global</th>
      <th colspan="10" class="text-center">Project</th>
      <th rowspan="3" class="col-md-2"></th>
    </tr>
    <tr>
      <th colspan="3" class="text-center">Project</th>
      <th colspan="2" class="text-center">Team</th>
      <th colspan="2" class="text-center">Permissions</th>
      <th colspan="4" class="text-center">Issues</th>
      <th colspan="3" class="text-center">Comments</th>
      <th colspan="2" class="text-center">Tags</th>
    </tr>
    <tr>
      <th class="text-center">{% vertical 'Create?' %}</th>
      <th class="text-center">{% vertical 'Modify?' %}</th>
      <th class="text-center">{% vertical 'Delete?' %}</th>
      <th class="text-center">{% vertical 'Create?' %}</th>
      <th class="text-center">{% vertical 'Manage?' %}</th>
      <th class="text-center">{% vertical 'Manage?' %}</th>
      <th class="text-center">{% vertical 'Manage?' %}</th>
      <th class="text-center">{% vertical 'Create?' %}</th>
      <th class="text-center">{% vertical 'Manage?' %}</th>
      <th class="text-center">{% vertical 'Modify?' %}</th>
      <th class="text-center">{% vertical 'Delete?' %}</th>
      <th class="text-center">{% vertical 'Create?' %}</th>
      <th class="text-center">{% vertical 'Modify?' %}</th>
      <th class="text-center">{% vertical 'Delete?' %}</th>
      <th class="text-center">{% vertical 'Manage?' %}</th>
      <th class="text-center">{% vertical 'Delete?' %}</th>
    </tr>
    {% for perm in permissions %}
    <tr>
      <td>{{ perm.type }}</td>
      <td>{{ perm.name }}</td>
      <td class="text-center"><a href="{% url 'toggle-global-permission' perm.id 'create-project' %}">{{ perm.create_project|boolean }}</a></td>
      <td class="text-center"><a href="{% url 'toggle-global-permission' perm.id 'modify-project' %}">{{ perm.modify_project|boolean }}</a></td>
      <td class="text-center"><a href="{% url 'toggle-global-permission' perm.id 'delete-project' %}">{{ perm.delete_project|boolean }}</a></td>
      <td class="text-center"><a href="{% url 'toggle-global-permission' perm.id 'add-team' %}">{{ perm.add_team|boolean }}</a></td>
      <td class="text-center"><a href="{% url 'toggle-global-permission' perm.id 'manage-team' %}">{{ perm.manage_team|boolean }}</a></td>
      <td class="text-center"><a href="{% url 'toggle-global-permission' perm.id 'manage-global-permission' %}">{{ perm.manage_global_permission|boolean }}</a></td>
      <td class="text-center"><a href="{% url 'toggle-global-permission' perm.id 'manage-project-permission' %}">{{ perm.manage_project_permission|boolean }}</a></td>
      <td class="text-center"><a href="{% url 'toggle-global-permission' perm.id 'create-issue' %}">{{ perm.create_issue|boolean }}</a></td>
      <td class="text-center"><a href="{% url 'toggle-global-permission' perm.id 'manage-issue' %}">{{ perm.manage_issue|boolean }}</a></td>
      <td class="text-center"><a href="{% url 'toggle-global-permission' perm.id 'modify-issue' %}">{{ perm.modify_issue|boolean }}</a></td>
      <td class="text-center"><a href="{% url 'toggle-global-permission' perm.id 'delete-issue' %}">{{ perm.delete_issue|boolean }}</a></td>
      <td class="text-center"><a href="{% url 'toggle-global-permission' perm.id 'create-comment' %}">{{ perm.create_comment|boolean }}</a></td>
      <td class="text-center"><a href="{% url 'toggle-global-permission' perm.id 'modify-comment' %}">{{ perm.modify_comment|boolean }}</a></td>
      <td class="text-center"><a href="{% url 'toggle-global-permission' perm.id 'delete-comment' %}">{{ perm.delete_comment|boolean }}</a></td>
      <td class="text-center"><a href="{% url 'toggle-global-permission' perm.id 'manage-tags' %}">{{ perm.manage_tags|boolean }}</a></td>
      <td class="text-center"><a href="{% url 'toggle-global-permission' perm.id 'delete-tags' %}">{{ perm.delete_tags|boolean }}</a></td>
      <td class="text-center">
        <a href="{% url 'edit-global-permission' perm.id %}" class="btn btn-primary btn-xs"><span class="glyphicon glyphicon-edit"></span> Edit</a>
        <a href="{% url 'delete-global-permission' perm.id %}" class="btn btn-danger btn-xs"><span class="glyphicon glyphicon-remove"></span> Delete</a>
      </td>
    </tr>
    {% endfor %}
  </table>
  {% else %}
  <div class="panel-body">
      There aren't any permissions defined yet.
  </div>
  {% endif %}

{% endblock %}
